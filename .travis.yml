language: java
sudo: false
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
script:
  - ./gradlew :pact-jvm-consumer-kotlin:asciidoctor --no-daemon
install: true
deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  keep-history: true
  local-dir: pact-jvm-consumer-kotlin/build/asciidoc
  on:
    all_branches: true
    condition: $TRAVIS_BRANCH =~ ^trigger-travis.*$
